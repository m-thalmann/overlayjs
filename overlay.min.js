var Overlay=function(){function a(d){var f=document.createElement("div");f.className="overlay";var g=!1,h=[],i=this;this.content=null,this.open=function(){return g||!1===i.on("opening")()?!1:void(g=!0,f.appendChild(this.content),document.body.appendChild(f),i.on("open")())},this.close=function(j){return g&&(j||!1!==i.on("closing")())&&void(f.classList.add("overlay_closing"),setTimeout(function(){f.parentNode.removeChild(f),f.classList.remove("overlay_closing"),g=!1,i.on("close")()},a.CLOSING_DURATION))},this.reset=function(){i.content&&i.content.remove(),i.content=document.createElement("div"),i.content.className="overlay_content"},this.on=function(j,k){return"function"==typeof k?void(h[j]=k):"function"==typeof h[j]?h[j]:function(){}},this.removeOn=function(j){delete h[j]},this.isOpened=function(){return g},function(){"object"!=typeof d&&(d={}),i.reset(),b(d,"closable",!0)&&f.addEventListener("click",function(j){c(i.content,j.target)||i.close()}),b(d,"opened",!0)&&i.open()}()}function b(d,f,g){return"undefined"==typeof d[f]?g:d[f]}function c(d,f){for(;f!=d&&f!=document.body;)f=f.parentElement;return f==d}return a.CLOSING_DURATION=500,a}(),OverlayManager=function(){function a(h){this.content=document.createElement("div"),this.content.className="overlay_content",d[h].content=this.content,this.open=function(){return b(h)},this.close=function(i){return c(h,i)},this.on=function(i,j){return d[h].on(i,j)},this.removeOn=function(i){return d[h].removeOn(i)},this.isOpened=function(){return d[h].isOpened()},this.getPos=function(){return h}}function b(h){if(d[h]instanceof Overlay)-1==f?(f=h,d[h].open()):!1===d[f].close()?console.warn("The currently open overlay does not want to be closed"):(f=h,d[h].open());else throw new Error("This overlay has been deleted")}function c(h,i){if(d[h]instanceof Overlay)f==h&&!1!==d[h].close(i)&&(f=-1);else throw new Error("This overlay has been deleted")}var d=[],f=-1;return{create:function(h){"undefined"==typeof h&&(h={opened:!0});var i=!1;"undefined"!=typeof h.opened&&(i=h.opened),h.opened=!1;var j=d.push(new Overlay(h))-1,k=new a(j);return i&&k.open(),k},remove:function(h){var i=h.getPos();d[i].close(),delete d[i]}}}();
