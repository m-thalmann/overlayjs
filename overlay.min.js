var Overlay=function(){function e(o){var r=document.createElement("div");r.className="overlay";var c=!1,i=[],s=this;this.content=null,this.open=function(){return c||s.on("opening")()===!1?!1:(c=!0,r.appendChild(this.content),document.body.appendChild(r),document.body.style.overflow="hidden",void s.on("open")())},this.close=function(n){return!c||!n&&s.on("closing")()===!1?!1:(document.body.style.overflow=null,r.classList.add("overlay_closing"),void setTimeout(function(){r.parentNode.removeChild(r),r.classList.remove("overlay_closing"),c=!1,s.on("close")()},e.CLOSING_DURATION))},this.reset=function(){s.content&&s.content.remove(),s.content=document.createElement("div"),s.content.className="overlay_content"},this.on=function(e,n){return"function"!=typeof n?"function"==typeof i[e]?i[e]:function(){}:void(i[e]=n)},this.removeOn=function(e){delete i[e]},this.isOpened=function(){return c},function(){"object"!=typeof o&&(o={}),s.reset(),n(o,"closable",!0)&&r.addEventListener("click",function(e){t(s.content,e.target)||s.close()}),n(o,"opened",!0)&&s.open()}()}function n(e,n,t){return"undefined"!=typeof e[n]?e[n]:t}function t(e,n){for(;n!=e&&n!=document.body;)n=n.parentElement;return n==e}return e.CLOSING_DURATION=500,e}(),OverlayManager=function(){function e(e){this.content=document.createElement("div"),this.content.className="overlay_content",o[e].content=this.content,this.open=function(){return n(e)},this.close=function(n){return t(e,n)},this.on=function(n,t){return o[e].on(n,t)},this.removeOn=function(n){return o[e].removeOn(n)},this.isOpened=function(){return o[e].isOpened()},this.getPos=function(){return e}}function n(e){if(!(o[e]instanceof Overlay))throw new Error("This overlay has been deleted");-1!=r?o[r].close()!==!1?(r=e,o[e].open()):console.warn("The currently open overlay does not want to be closed"):(r=e,o[e].open())}function t(e,n){if(!(o[e]instanceof Overlay))throw new Error("This overlay has been deleted");r==e&&o[e].close(n)!==!1&&(r=-1)}var o=[],r=-1;const c={create:function(n){"undefined"==typeof n&&(n={opened:!0});var t=!1;"undefined"!=typeof n.opened&&(t=n.opened),n.opened=!1;var r=o.push(new Overlay(n))-1,c=new e(r);return t&&c.open(),c},remove:function(e){var n=e.getPos();o[n].close(),delete o[n]}};return c}();